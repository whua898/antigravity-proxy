# Antigravity-Proxy 使用说明

## 概述
Antigravity-Proxy 是一个基于 MinHook 的 Windows DLL 代理注入工具。
通过劫持 version.dll，可以透明地将目标进程的网络流量重定向到代理服务器。

## 快速开始

### 1. 部署文件
将以下文件复制到目标程序的目录：
- ersion.dll (编译生成的 DLL)
- config.json (配置文件)

### 2. 配置代理
编辑 config.json，设置代理服务器地址：
`json
{
    "proxy": {
        "host": "127.0.0.1",
        "port": 7890,
        "type": "socks5"
    }
}
`

### 3. 启动目标程序
直接启动目标程序，DLL 会自动加载并重定向网络流量。

## 配置文件说明

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| proxy.host | 代理服务器地址 | 127.0.0.1 |
| proxy.port | 代理服务器端口 | 7890 |
| proxy.type | 代理类型 (socks5/http) | socks5 |
| fake_ip.enabled | 是否启用 FakeIP 系统 | true |
| fake_ip.cidr | 虚拟 IP 地址范围 | 10.0.0.0/8 |
| timeout.connect | 连接超时 (毫秒) | 5000 |
| timeout.send | 发送超时 (毫秒) | 5000 |
| timeout.recv | 接收超时 (毫秒) | 5000 |
| traffic_logging | 是否记录流量日志 | false |
| child_injection | 是否注入子进程 | true |
| target_processes | 目标进程列表 (空=全部) | [] |

## v1.1.0 更新说明

### 新增功能
1. **目标进程过滤**: 可配置 	arget_processes 数组，仅对指定进程注入 DLL
2. **回环地址 bypass**: 127.0.0.1、localhost 等本地地址不再走代理
3. **日志中文化**: 所有日志已统一为中文输出

### 配置示例
`json
{
    "target_processes": [
        "language_server_windows",
        "Antigravity.exe"
    ]
}
`
如果 	arget_processes 为空数组或不存在，则注入所有子进程(原行为)。

## 日志文件
DLL 运行时会在当前目录生成 proxy.log 日志文件，用于调试。

## 常见问题

### Q: DLL 加载失败？
A: 确保使用正确的架构版本 (x64 程序用 x64 DLL，x86 程序用 x86 DLL)。

### Q: 网络连接失败？
A: 检查代理服务器是否正常运行，且端口配置正确。

### Q: 如何验证 DLL 是否生效？
A: 检查目标程序目录是否生成 proxy.log 文件。

## 编译信息
- 编译时间: 2026-01-08 01:42:30
- 编译配置: Release
- 目标架构: x64

---
GitHub: https://github.com/yuaotian/antigravity-proxy
